const { zokou } = require('../framework/zokou');

//debut tirage card üíé
const ssm = ['https://telegra.ph/file/010fd43c008e41fe5a5c2.jpg' // super buu ss-
];
const ss = ['https://telegra.ph/file/231c0229ca71f9522278f.jpg', // Vegeta Ss¬π1
'https://telegra.ph/file/2d59f58d786cd111688cf.jpg', // goku ss¬π1
'https://telegra.ph/file/385eb54c3480d52c5273d.jpg' // buutrunks ss1
 
];
const ssp = ['https://telegra.ph/file/2e7022832c3d2bd724045.jpg', // aizen S+1
'https://telegra.ph/file/58153d6d5087030ec05c3.jpg',  //Eida S+1
'https://telegra.ph/file/f77356be0b92c11c1e7da.jpg', // Daemon S+1
'https://telegra.ph/file/e8fb0aae19bc8ed49454d.jpg' // Lemiel s+1
 ];
const sspsuper = [ 'https://telegra.ph/file/f537d55a26541a6ab3b2a.jpg', // hypnos ss+super1
                   'https://telegra.ph/file/48e8e1e17c2282c94a93a.jpg', // Thanatos Ss+super1
                   'https://telegra.ph/file/c72549456d40524b16da7.jpg', // Hit Ss+super1
                   'https://telegra.ph/file/be047c496050a978671a2.jpg', // Goku sssuper¬π1
                   'https://telegra.ph/file/496db45cbaf598c2089c6.jpg', // Cabba Ss+super3
                   'https://telegra.ph/file/f36573d88a16827a1ff66.jpg' // Goku Ss+super¬≤1
 
];
const sspmega = ['https://telegra.ph/file/16c676be951d8f70d6d09.jpg', // Kefla Ss+ Mega3
             'https://telegra.ph/file/ecea10db60962562ea97f.jpg', // Jiren Ss+ Mega¬≤1
             'https://telegra.ph/file/28d91fcd1102b520517d1.jpg', // Adam Ss+ mega1
             'https://telegra.ph/file/19a0fcde7475e02906b66.jpg' // superbuuss-1
 
 
];
const sspultra = ['https://telegra.ph/file/00274b68634f9f037b23d.jpg' //limule ss+ultra1
 
];
const sspultimate = [];
 // fin tirage card üíé

 //debut tirage ü•á
 const sm1 = ['https://telegra.ph/file/426754902fd6c891f7af5.jpg',
              'https://telegra.ph/file/a21dfbda488fd0f52de69.jpg',
              'https://telegra.ph/file/39b375e4a8f88051ccdb9.jpg',
              'https://telegra.ph/file/03e95776d943a8038c417.jpg', //Aiolia s-1
              'https://telegra.ph/file/24c5fadef57ea3561f344.jpg', //Patalli s-1
              'https://telegra.ph/file/4cda2c38667cb6e84ff3d.jpg', // Naruto(the last movie) S-1
              'https://telegra.ph/file/1a78898c7f42a2d9e3a07.jpg', // Giorno S-1
              'https://telegra.ph/file/370741769428ee2cb6a59.jpg' //Sun Jin Woo s-1
             ];
 const s1 = ['https://telegra.ph/file/6148a475bbdfb3eb987c5.jpg', //Mu S1
'https://telegra.ph/file/5bfd3a977f5b7aa2ba072.jpg', //code S1
'https://telegra.ph/file/a033749578cfdeb6038b2.jpg', // Madara Six paths(mugen tsukuyomi) S1
  'https://telegra.ph/file/06f5adeb35821f28e117c.jpg'  // yamamoto s1           
  
 ];
 const sp1 = ['https://telegra.ph/file/9b5ef6db91043b5db0484.jpg'
  
 ];
 const spsuper1 = ['https://telegra.ph/file/62309005b59b8a397fc1a.jpg', // Ichigo S+super
                   'https://telegra.ph/file/b7e32c2bc6c1e2e5a673b.jpg' // cabba ss+super1
  
 ];
//fin tirage ü•á

// debut tirage ü•à
 const sm2 = ['https://telegra.ph/file/672a24193384b4bd8e1fd.jpg',
              'https://telegra.ph/file/86921b5a9ef7da3c14bd0.jpg',
              'https://telegra.ph/file/cfcbfa4137e6eb8f4de66.jpg',
              'https://telegra.ph/file/bebac36db3bf74c021d22.jpg', // Netero s-2
'https://telegra.ph/file/e320a2fcfead7ef3c6423.jpg', // Kashimo S-2
'https://telegra.ph/file/c12fcfb537023861feec9.jpg', //Maki s-2
'https://telegra.ph/file/50857f071986a80b12f5b.jpg', // Yuki s-2
'https://telegra.ph/file/c71a40e2b3f512947fac6.jpg', // uraume s-2
'https://telegra.ph/file/f77bbb0ee531a107da1f5.jpg', // Marco S-2
'https://telegra.ph/file/9fad143b4b91245f37013.jpg', //Luffy s-2
'https://telegra.ph/file/f075991cfda1c6d234572.jpg', // gremmy s-
'https://telegra.ph/file/6c5b436382383f7955613.jpg', // Yuta s-2
'https://telegra.ph/file/eb31b4ea7bd082709bfa9.jpg', //Mahoraga s-2
'https://telegra.ph/file/ac7663e4ea835c468fde7.jpg', //Mahito s-2
'https://telegra.ph/file/6880e8cfc8cb408c6a622.jpg', // Kenjaku s-2
'https://telegra.ph/file/9fef6c5728d2cb63f933b.jpg', // Itadori S-2
'https://telegra.ph/file/a4318001b24d91997e893.jpg', // Doflamingo s-2
    'https://telegra.ph/file/9bc8658bd275f1d122b96.jpg' // mash s-2          
              ];
 const s2 = ['https://telegra.ph/file/2804c718042a3b329a65b.jpg',// Flashy flash s2
            ' https://telegra.ph/file/84eedf7a4bb4b1c6da680.jpg', // luffy(wano arc) s2
             'https://telegra.ph/file/47842bb500bace9724f79.jpg' // Grimmjow s2
  
 ];
 const sp2 = ['https://telegra.ph/file/a0828fe4416950d801d72.jpg', //ulquiorra s+2
'https://telegra.ph/file/bd2f3d1bd6d709be3cdaf.jpg', // izuku s+2
'https://telegra.ph/file/74631889fa24a3c8c28ea.jpg', // cid s+2
'https://telegra.ph/file/1064a245a87122f6b8fb4.jpg', // garp s+2
'https://telegra.ph/file/0785892951c478cebb3c8.jpg', //Mihawk s+2
'https://telegra.ph/file/61429b2f94de5e9bb1730.jpg'  // katakuri s+2
  
 ];
 const spsuper2 = ['https://telegra.ph/file/2f3c9b65d600c4d5fd8b7.jpg', // big mom s+super2
'https://telegra.ph/file/ae98b09ff6d6290d1069d.jpg', // sukuna s+super2
'https://telegra.ph/file/664d29d2eca99db29eebd.jpg' // hitsugaya ssuper2
  
 ];
//Fin tirage ü•à

 
 // debut tirage ü•â
 const sm3 = ['https://telegra.ph/file/94381c3e145584c2ab242.jpg',
              'https://telegra.ph/file/7b4cf81d7b513ea55cf5e.jpg',
              'https://telegra.ph/file/eb19ddad296b886852364.jpg',
              'https://telegra.ph/file/cd226da3550fd5e92186d.jpg', // polnareff s-3
'https://telegra.ph/file/782f74aa3ef5263fdb226.jpg', //dot s-3
'https://telegra.ph/file/4cfeb4dca9a0e6d313c6c.jpg' // giyu s-3
              ];
 const s3 = ['https://telegra.ph/file/7a9aa8472b2d0a5fdbce7.jpg',
             'https://telegra.ph/file/333e26a425921aa0fbd28.jpg',
             'https://telegra.ph/file/e703f7dc768221631c661.jpg',
             'https://telegra.ph/file/efb8a9cc825806ca6ae50.jpg',
             'https://telegra.ph/file/53d0e138ee09c032d6899.jpg',
             'https://telegra.ph/file/d7728b4458bfe6eed9051.jpg',
             'https://telegra.ph/file/46b20b4ccb6ca65993d1d.jpg',
             'https://telegra.ph/file/292a10e8928829ee7de07.jpg',
             'https://telegra.ph/file/b497b91dd06bebf7f208e.jpg',
             'https://telegra.ph/file/bd0d7ee9b6dd2d9d2839e.jpg', //Shin s3
'https://telegra.ph/file/f593a374bd7458f073483.jpg', // choso S3
'https://telegra.ph/file/73ea51f3cd6f3977cb8d4.jpg', // Naobito s3
'https://telegra.ph/file/5b4f4a4b754e98881c296.jpg', //joker s3
'https://telegra.ph/file/cf8bb18a3d4e0f80f1ec0.jpg', //Yuji s3
'https://telegra.ph/file/8d2cb6a82e81bbb36a2b9.jpg', //Kakyoin s3
'https://telegra.ph/file/56cd208e8de6e8ecd3eee.jpg', // avdol s3
'https://telegra.ph/file/4863985488f36ad717455.jpg', //Lance s3
  'https://telegra.ph/file/9ec7f0325d34f50804d90.jpg' // yamcha s3
             ];
 const sp3 = ['https://telegra.ph/file/53e00960b21589b85981b.jpg',
              'https://telegra.ph/file/a26e4fa9d5f0dda2a5a60.jpg',
              'https://telegra.ph/file/cf0840a79020b45d919ee.jpg', //Aoi s+3
'https://telegra.ph/file/284191b07d77d6ab6da46.jpg' //sukuna s+3
              ];
  const spsuper3 = ['https://telegra.ph/file/18b45cf94f8c6a93630f3.jpg', //tenshihan s+utlimate3
'https://telegra.ph/file/e799faa603819bfd93790.jpg', //krilin s+ultimate3
'https://telegra.ph/file/e97d45d6422b5d3f74aba.jpg', // hakari s+super3
   
  ];
 // fin tirage ü•â
   

function lien1 () {
    const indiceAleatoire = Math.floor(Math.random() * ss.length);
    const lienAleatoire = ss[indiceAleatoire];
    return lienAleatoire;
}

function lien2 () {
    const indiceAleatoire = Math.floor(Math.random() * ssp.length);
    const lienAleatoire = ssp[indiceAleatoire];
    return lienAleatoire;
}

function lien3 () {
    const indiceAleatoire = Math.floor(Math.random() * sspsuper.length);
    const lienAleatoire = sspsuper[indiceAleatoire];
    return lienAleatoire;
}

function lien4 () {
    const indiceAleatoire = Math.floor(Math.random() * sspmega.length);
    const lienAleatoire = sspmega[indiceAleatoire];
    return lienAleatoire;
}

function lien5 () {
    const indiceAleatoire = Math.floor(Math.random() * sspultra.length);
    const lienAleatoire = sspultra[indiceAleatoire];
    return lienAleatoire;
}

function lien6 () {
    const indiceAleatoire = Math.floor(Math.random() * sspultimate.length);
    const lienAleatoire = sspultimate[indiceAleatoire];
    return lienAleatoire;
}

function lien7 () {
    const indiceAleatoire = Math.floor(Math.random() * ssm.length);
    const lienAleatoire = ssm[indiceAleatoire];
    return lienAleatoire;
}

function lien8 () {
    const indiceAleatoire = Math.floor(Math.random() * s1.length);
    const lienAleatoire = s1[indiceAleatoire];
    return lienAleatoire;
}

function lien9 () {
    const indiceAleatoire = Math.floor(Math.random() * sp1.length);
    const lienAleatoire = sp1[indiceAleatoire];
    return lienAleatoire;
}

function lien10 () {
    const indiceAleatoire = Math.floor(Math.random() * spsuper1.length);
    const lienAleatoire = spsuper1[indiceAleatoire];
    return lienAleatoire;
}

function lien11 () {
    const indiceAleatoire = Math.floor(Math.random() * sm1.length);
    const lienAleatoire = sm1[indiceAleatoire];
    return lienAleatoire;
}

function lien12 () {
    const indiceAleatoire = Math.floor(Math.random() * s2.length);
    const lienAleatoire = s2[indiceAleatoire];
    return lienAleatoire;
}

function lien13 () {
    const indiceAleatoire = Math.floor(Math.random() * sp2.length);
    const lienAleatoire = sp2[indiceAleatoire];
    return lienAleatoire;
}

function lien14 () {
    const indiceAleatoire = Math.floor(Math.random() * spsuper2.length);
    const lienAleatoire = spsuper2[indiceAleatoire];
    return lienAleatoire;
}

function lien15 () {
    const indiceAleatoire = Math.floor(Math.random() * sm2.length);
    const lienAleatoire = sm2[indiceAleatoire];
    return lienAleatoire;
}

function lien16 () {
    const indiceAleatoire = Math.floor(Math.random() * s3.length);
    const lienAleatoire = s3[indiceAleatoire];
    return lienAleatoire;
}


function lien17 () {
    const indiceAleatoire = Math.floor(Math.random() * sp3.length);
    const lienAleatoire = sp3[indiceAleatoire];
    return lienAleatoire;
}

function lien18 () {
    const indiceAleatoire = Math.floor(Math.random() * spsuper3.length);
    const lienAleatoire = spsuper3[indiceAleatoire];
    return lienAleatoire;
}

function lien19 () {
    const indiceAleatoire = Math.floor(Math.random() * sm3.length);
    const lienAleatoire = sm3[indiceAleatoire];
    return lienAleatoire;
}

/*function liens (lie) {
    const indiceAleatoire = Math.floor(Math.random() * lie.length);
    const lienAleatoire = lie[indiceAleatoire];
    return lienAleatoire;
}
*/

 /*const liens1 = lien1();
 const liens2 = lien2();
 const liens3 = lien3();
 const liens4 = lien4();
 const liens5 = lien5();
 const liens6 = lien6();
 const liens7 = lien7();
 const liens8 = lien8();
 const liens9 = lien9();
 const liens10 = lien10();
 const liens11 = lien11();
 const liens12 = lien12();
 const liens13 = lien13();
 const liens14 = lien14();
 const liens15 = lien15();
 const liens16 = lien16();
 const liens17 = lien17();
 const liens18 = lien18();
 const liens19 = lien19();*/

 zokou(
  { 
    nomCom: "tirage", 
    reaction: "üé∞", 
    categorie: "NEOverse" 
  }, 
  async (dest, zk, commandeOptions) => {
    const { repondre, arg, ms } = commandeOptions;
   const niveau = arg[0];
   try {

        // D√©terminer le type de carte √† tirer en fonction du niveau sp√©cifi√©
        switch (niveau) {
            case "üíé":
                const ss_pourcentage = [5, 4, 3, 2, 1.5, 1, 0.5];
                const p1 = tirerCarte(ss_pourcentage, 1.7);
                if (p1  === '4') {
                 const liens1 = lien1();
                    zk.sendMessage(dest, { image: { url: liens1 } }, { quoted: ms });
                 lien1();
                  sleep(3000);
                 const l1 = lien1();
                   await zk.sendMessage(dest, { image: { url: l1 } }, { quoted: ms });
               lien1(); } else if (p1 === '3') {
                 const liens2 = lien2();
                    zk.sendMessage(dest, { image: { url: liens2 } }, { quoted: ms });
                   lien2();
                 sleep(3000);
                 const l2 = lien2();
                    zk.sendMessage(dest, { image: { url: l2 } }, { quoted: ms });
             lien2();   } else if (p1 === '2') {
                 const liens3 = lien3();
                    zk.sendMessage(dest, { image: { url: liens3 } }, { quoted: ms });
                 lien3();
                 sleep(3000);
                 const l3 = lien3();
                      zk.sendMessage(dest, { image: { url: l3 } }, { quoted: ms });
               lien3(); } else if (p1 === '1.5') {
              const    liens4 = lien4();
                    zk.sendMessage(dest, { image: { url: liens4 } }, { quoted: ms });
                  lien4();
                  sleep(3000);
                 const l4 = lien4();
                      zk.sendMessage(dest, { image: { url: l4 } }, { quoted: ms });
              lien4();  } else if (p1 === '1') {
                 const liens5 = lien5();
                    zk.sendMessage(dest, { image: { url: liens5 } }, { quoted: ms });
           lien5();
                 sleep(3000);
                 const l5 = lien5();
                         zk.sendMessage(dest, { image: { url: l5 } }, { quoted: ms });
               lien5(); } else if (p1 === '0.5') {
                 const liens6 = lien6();
                    zk.sendMessage(dest, { image: { url: liens6 } }, { quoted: ms });
                   lien6();
                 sleep(3000);
                 const l6 = lien6();
                     zk.sendMessage(dest, { image: { url: l6 } }, { quoted: ms });
               lien6(); } else {
                 const liens7 = lien7();
                    zk.sendMessage(dest, { image: { url: liens7 } }, { quoted: ms });
                lien7();
                 sleep(3000);
                 const l7 = lien7();
                      zk.sendMessage(dest, { image: { url: l7 } }, { quoted: ms });
            lien7();    }
                break;
            case "ü•á":
                const le_pourcentage = [7, 5, 3, 2];
                const p2 = tirerCarte(le_pourcentage, 1.7);
                if (p2 === '5') {
                 const liens8 = lien8();
                    zk.sendMessage(dest, { image: { url: liens8 } }, { quoted: ms });
                lien8();
                 sleep(3000);
              const l8 = lien8();
                       zk.sendMessage(dest, { image: { url: l8 } }, { quoted: ms });
               lien8(); } else if (p2 === '3') {
                 const liens9 = lien9();
                    zk.sendMessage(dest, { image: { url: liens9 } }, { quoted: ms });
                  lien9();
                 sleep(3000);
                const l9 = lien9();
                       zk.sendMessage(dest, { image: { url: l9 } }, { quoted: ms });
               lien9(); } else if (p2 === '2') {
                 const liens10 = lien10();
                    zk.sendMessage(dest, { image: { url: liens10 } }, { quoted: ms });
                 lien10();
                 sleep(3000);
                const l10 = lien10();
                        zk.sendMessage(dest, { image: { url: l10 } }, { quoted: ms });
              lien10();  } else {
                 const liens11 = lien11();
                    zk.sendMessage(dest, { image: { url: liens11 } }, { quoted: ms });
             lien11();
                 sleep(3000);
              const l11 = lien11();
                         zk.sendMessage(dest, { image: { url: l11 } }, { quoted: ms });
            lien11();    }
                break;
            case "ü•à":
                const ul_pourcentage = [40, 30, 20, 10];
          const p3 = tirerCarte(ul_pourcentage, 1.7);
                if (p3 === '30') {
                 const liens12 = lien12();
                    zk.sendMessage(dest, { image: { url: liens12 } }, { quoted: ms });
            lien12();
                 sleep(3000);
               const l12 = lien12();
                          zk.sendMessage(dest, { image: { url: l12 } }, { quoted: ms });
             lien12();   } else if (p3 === '20') {
                 const liens13 = lien13();
                    zk.sendMessage(dest, { image: { url: liens13 } }, { quoted: ms });
             lien13();
                 sleep(3000);
               const l13 = lien13();
                         zk.sendMessage(dest, { image: { url: l13 } }, { quoted: ms });
            lien13();    } else if (p3 === '10') {
                 const liens14 = lien14();
                    zk.sendMessage(dest, { image: { url: liens14 } }, { quoted: ms });
              lien14();
                 sleep(3000);
                 const l14 = lien14();
                         zk.sendMessage(dest, { image: { url: l14 } }, { quoted: ms });
             lien14();   } else {
                 const liens15 = lien15();
                    zk.sendMessage(dest, { image: { url: liens15 } }, { quoted: ms });
         lien15();
                 sleep(3000);
                const l15 = lien15();
                             zk.sendMessage(dest, { image: { url: l15 } }, { quoted: ms });
              lien15();  }
                break;
            case "ü•â":
                const sp_pourcentage = [90, 70, 60, 50];
                const p4 = tirerCarte(sp_pourcentage, 1.7);
                if (p4 === '70') {
                 const liens16 = lien16();
                    zk.sendMessage(dest, { image: { url: liens16 } }, { quoted: ms });
           lien16();
                 sleep(3000);
                const l16 = lien16();
                           zk.sendMessage(dest, { image: { url: l16 } }, { quoted: ms });
             lien16();   } else if (p4 === '60') {
                 const liens17 = lien17();
                    zk.sendMessage(dest, { image: { url: liens17 } }, { quoted: ms });
            lien17();
                 sleep(3000);
               const l17 = lien17();
                          zk.sendMessage(dest, { image: { url: l17 } }, { quoted: ms });
            lien17();    } else if (p4 === '50') {
                 const liens18 = lien18();
                    zk.sendMessage(dest, { image: { url: liens18 } }, { quoted: ms });
        lien18();
                 sleep(3000);
              const l18 = lien18();
                             zk.sendMessage(dest, { image: { url: l18 } }, { quoted: ms });
               lien18(); } else {
                 const liens19 = lien19();
                    zk.sendMessage(dest, { image: { url: liens19 } }, { quoted: ms });
         lien19();
                 sleep(3000);
                const l19 = lien19();
                             zk.sendMessage(dest, { image: { url: l19 } }, { quoted: ms });
          lien19();      } 
                break;
            default:
                console.error("Niveau invalide");
                return;
        }
   } catch (error) {
    console.error('une erreur est survenue', error);
   repondre('une erreur est surevenu');
  }
  }
 );
// Fonction pour choisir un pourcentage au hasard avec une probabilit√© ajust√©e
function tirerCarte(listePourcentages, facteurAttenuation) {
    // Calculer la somme des pourcentages
    const sommePourcentages = listePourcentages.reduce((acc, pourcentage) => acc + pourcentage, 0);
    
    // Calculer le facteur d'att√©nuation inverse (pour inverser l'effet sur les pourcentages)
    const inverseFacteurAttenuation = 2 / facteurAttenuation;
    
    // G√©n√©rer un nombre al√©atoire entre 0 et la somme des pourcentages
    const randomValue = Math.random() * sommePourcentages;
    
    // Parcourir la liste des pourcentages et choisir un indice en fonction du nombre al√©atoire
    let cumulatif = 0;
    for (let i = 0; i < listePourcentages.length; i++) {
        // Ajuster la probabilit√© en fonction du pourcentage et du facteur d'att√©nuation
        const probabiliteAjustee = Math.pow(listePourcentages[i], inverseFacteurAttenuation);
        
        cumulatif += probabiliteAjustee;
        if (randomValue <= cumulatif) {
            return listePourcentages[i]; // Retourner le pourcentage correspondant
        }
    }
    
    // Si aucune valeur n'est choisie (ce qui ne devrait pas arriver normalement), retourner la derni√®re valeur
    return listePourcentages[listePourcentages.length - 1];
}

function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}
